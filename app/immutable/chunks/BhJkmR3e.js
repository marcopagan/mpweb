import{av as ge,Q as Z,R as W,T as me,V as H,s as D,i as y,y as C,v as ye,j as z,h as pe,g as M,ak as Ee,k as we,l as be,m as j,n as k,t as I,Y as Ae,o as ie,p as se,q as Te,aw as fe,a0 as le,S as Se,an as Ie,ad as $,ax as Y,af as xe,ay as J,az as Ce,aA as X,aB as ee,aC as Me,$ as Ne,aD as Re,a6 as De,aE as He,x as ue,F as B,aF as Le,Z as Oe,X as ke,A as Ye,K as V,D as Ve,M as q,C as qe,G as ze,I as Be,J as te}from"./BO94aUzD.js";import{b as re,e as Je,t as oe,a as ae}from"./CXeFc7Ny.js";import{b as Xe,s as Fe,a as Ge}from"./CrbL80z1.js";import{o as Ke}from"./NWMzFNKK.js";import{s as Pe}from"./CfeX_JpR.js";import{i as Qe}from"./DGClMfjY.js";function Ue(t,e,r,a=!0){a&&r();for(var n of e)t.addEventListener(n,r);ge(()=>{for(var f of e)t.removeEventListener(f,r)})}function ve(t){var e=me,r=H;Z(null),W(null);try{return t()}finally{Z(e),W(r)}}function ct(t,e,r,a=r){t.addEventListener(e,()=>ve(r));const n=t.__on_r;n?t.__on_r=()=>{n(),a(!0)}:t.__on_r=()=>a(!0),Xe()}function _t(t,e){return e}function Ze(t,e,r,a){for(var n=[],f=e.length,i=0;i<f;i++)Me(e[i].e,n,!0);var s=f>0&&n.length===0&&r!==null;if(s){var o=r.parentNode;Ne(o),o.append(r),a.clear(),S(t,e[0].prev,e[f-1].next)}Re(n,()=>{for(var h=0;h<f;h++){var c=e[h];s||(a.delete(c.k),S(t,c.prev,c.next)),De(c.e,!s)}})}function dt(t,e,r,a,n,f=null){var i=t,s={flags:e,items:new Map,first:null},o=(e&fe)!==0;if(o){var h=t;i=y?D(C(h)):h.appendChild(ye())}y&&z();var c=null,g=!1,v=Ee(()=>{var d=r();return Se(d)?d:d==null?[]:le(d)});pe(()=>{var d=M(v),l=d.length;if(g&&l===0)return;g=l===0;let b=!1;if(y){var p=we(i)===be;p!==(l===0)&&(i=j(),D(i),k(!1),b=!0)}if(y){for(var E=null,w,m=0;m<l;m++){if(I.nodeType===8&&I.data===Ae){i=I,b=!0,k(!1);break}var u=d[m],_=a(u,m);w=ce(I,s,E,null,u,_,m,n,e,r),s.items.set(_,w),E=w}l>0&&D(j())}y||We(d,s,i,n,e,a,r),f!==null&&(l===0?c?ie(c):c=se(()=>f(i)):c!==null&&Te(c,()=>{c=null})),b&&k(!0),M(v)}),y&&(i=I)}function We(t,e,r,a,n,f,i){var G,K,P,Q;var s=(n&Ce)!==0,o=(n&(X|J))!==0,h=t.length,c=e.items,g=e.first,v=g,d,l=null,b,p=[],E=[],w,m,u,_;if(s)for(_=0;_<h;_+=1)w=t[_],m=f(w,_),u=c.get(m),u!==void 0&&((G=u.a)==null||G.measure(),(b??(b=new Set)).add(u));for(_=0;_<h;_+=1){if(w=t[_],m=f(w,_),u=c.get(m),u===void 0){var de=v?v.e.nodes_start:r;l=ce(de,e,l,l===null?e.first:l.next,w,m,_,a,n,i),c.set(m,l),p=[],E=[],v=l.next;continue}if(o&&je(u,w,_,n),(u.e.f&Y)!==0&&(ie(u.e),s&&((K=u.a)==null||K.unfix(),(b??(b=new Set)).delete(u))),u!==v){if(d!==void 0&&d.has(u)){if(p.length<E.length){var R=E[0],A;l=R.prev;var F=p[0],L=p[p.length-1];for(A=0;A<p.length;A+=1)ne(p[A],R,r);for(A=0;A<E.length;A+=1)d.delete(E[A]);S(e,F.prev,L.next),S(e,l,F),S(e,L,R),v=R,l=L,_-=1,p=[],E=[]}else d.delete(u),ne(u,v,r),S(e,u.prev,u.next),S(e,u,l===null?e.first:l.next),S(e,l,u),l=u;continue}for(p=[],E=[];v!==null&&v.k!==m;)(v.e.f&Y)===0&&(d??(d=new Set)).add(v),E.push(v),v=v.next;if(v===null)continue;u=v}p.push(u),l=u,v=u.next}if(v!==null||d!==void 0){for(var x=d===void 0?[]:le(d);v!==null;)(v.e.f&Y)===0&&x.push(v),v=v.next;var O=x.length;if(O>0){var he=(n&fe)!==0&&h===0?r:null;if(s){for(_=0;_<O;_+=1)(P=x[_].a)==null||P.measure();for(_=0;_<O;_+=1)(Q=x[_].a)==null||Q.fix()}Ze(e,x,he,c)}}s&&xe(()=>{var U;if(b!==void 0)for(u of b)(U=u.a)==null||U.apply()}),H.first=e.first&&e.first.e,H.last=l&&l.e}function je(t,e,r,a){(a&X)!==0&&ee(t.v,e),(a&J)!==0?ee(t.i,r):t.i=r}function ce(t,e,r,a,n,f,i,s,o,h){var c=(o&X)!==0,g=(o&He)===0,v=c?g?Ie(n):$(n):n,d=(o&J)===0?i:$(i),l={i:d,v,k:f,a:null,e:null,prev:r,next:a};try{return l.e=se(()=>s(t,v,d,h),y),l.e.prev=r&&r.e,l.e.next=a&&a.e,r===null?e.first=l:(r.next=l,r.e.next=l.e),a!==null&&(a.prev=l,a.e.prev=l.e),l}finally{}}function ne(t,e,r){for(var a=t.next?t.next.e.nodes_start:r,n=e?e.e.nodes_start:r,f=t.e.nodes_start;f!==a;){var i=ue(f);n.before(f),f=i}}function S(t,e,r){e===null?t.first=r:(e.next=r,e.e.next=r&&r.e),r!==null&&(r.prev=e,r.e.prev=e&&e.e)}function ht(t,e,r=!1,a=!1,n=!1){var f=t,i="";B(()=>{var s=H;if(i===(i=e()??"")){y&&z();return}if(s.nodes_start!==null&&(Le(s.nodes_start,s.nodes_end),s.nodes_start=s.nodes_end=null),i!==""){if(y){I.data;for(var o=z(),h=o;o!==null&&(o.nodeType!==8||o.data!=="");)h=o,o=ue(o);if(o===null)throw Oe(),ke;re(I,h),f=D(o);return}var c=i+"";r?c=`<svg>${c}</svg>`:a&&(c=`<math>${c}</math>`);var g=Je(c);if((r||a)&&(g=C(g)),re(C(g),g.lastChild),r||a)for(;C(g);)f.before(C(g));else f.before(g)}})}function _e(t){var e,r,a="";if(typeof t=="string"||typeof t=="number")a+=t;else if(typeof t=="object")if(Array.isArray(t)){var n=t.length;for(e=0;e<n;e++)t[e]&&(r=_e(t[e]))&&(a&&(a+=" "),a+=r)}else for(r in t)t[r]&&(a&&(a+=" "),a+=r);return a}function $e(){for(var t,e,r=0,a="",n=arguments.length;r<n;r++)(t=arguments[r])&&(e=_e(t))&&(a&&(a+=" "),a+=e);return a}function gt(t){return typeof t=="object"?$e(t):t??""}function et(t,e,r){var a=t==null?"":""+t;return e&&(a=a?a+" "+e:e),a===""?null:a}function tt(t,e){return t==null?null:String(t)}function rt(t,e,r,a,n,f){var i=t.__className;if(y||i!==r||i===void 0){var s=et(r,a);(!y||s!==t.getAttribute("class"))&&(s==null?t.removeAttribute("class"):t.className=s),t.__className=r}return f}function at(t,e,r,a){var n=t.__style;if(y||n!==e){var f=tt(e);(!y||f!==t.getAttribute("style"))&&(f==null?t.removeAttribute("style"):t.style.cssText=f),t.__style=e}return a}function mt(t,e){Ue(window,["resize"],()=>ve(()=>e(window[t])))}const N=16;function T(t,e){return t?Math.round((e-N/2)/N)*N:e}function yt(t){return{x:t.clientX,y:t.clientY}}function pt(t,e,r,a,n){const f=Math.abs(T(n,r)-T(n,t)),i=Math.abs(T(n,a)-T(n,e)),s=r<=t?T(n,r):T(n,t),o=a<=e?T(n,a):T(n,e);return{x:s,y:o,wdt:f,hgt:i}}var nt=oe('<span class="recto-numbers svelte-10dng05"> </span>'),it=oe('<div><!> <div class="recto-inside svelte-10dng05"><!></div></div>');function Et(t,e){Ye(e,!0),Ke(async()=>{setTimeout(()=>{const s=document.getElementById(e.id);s instanceof HTMLElement&&(s.style.width="0px",s.style.height="0px")},200)});var r=it(),a=V(r);{var n=s=>{var o=nt(),h=V(o);q(o),B((c,g)=>Pe(h,`${c??""}x${g??""}`),[()=>Math.floor(e.wdt/N),()=>Math.floor(e.hgt/N)]),ae(s,o)};Qe(a,s=>{(e.type==="live"||e.type==="invalid")&&s(n)})}var f=Ve(a,2),i=V(f);Fe(i,()=>e.children),q(f),q(r),B((s,o)=>{Ge(r,"id",e.id),rt(r,1,`recto recto-${e.type}`,"svelte-10dng05"),at(r,`transform: translate(${e.x??""}px, ${e.y??""}px); width: ${s??""}px; height: ${o??""}px`)},[()=>e.wdt.toString(),()=>e.hgt.toString()]),ae(t,r),qe()}const wt=(t,e)=>{let r=ze(Be(e));{const i=localStorage.getItem(t);i&&te(r,JSON.parse(i),!0)}const a=()=>{M(r)?localStorage.setItem(t,JSON.stringify(M(r))):localStorage.removeItem(t)};return{get:()=>M(r),set:i=>{te(r,i,!0),a()}}};export{Et as R,N as S,pt as a,mt as b,gt as c,at as d,dt as e,yt as g,ht as h,_t as i,ct as l,rt as s,wt as u};
