import{b as ke,e as Ze,t as Y,a as M,c as fe}from"../chunks/CR9PumUT.js";import{o as Ie}from"../chunks/B6o4mBRG.js";import{au as je,M as Te,N as Oe,P as et,Q as ne,s as se,h as O,y as K,v as tt,a as me,b as rt,n as a,ag as st,r as at,c as nt,d as ze,e as ce,i as R,T as it,f as Le,g as Pe,p as ot,av as Re,Y as $e,O as lt,ak as ut,aw as pe,ax as ve,ab as ft,ay as we,az as ct,aA as be,aB as Ae,aC as vt,X as dt,aD as ht,a2 as _t,aE as gt,x as Ye,F as W,aF as mt,V as pt,S as yt,m as wt,aa as bt,aj as p,A as xe,J as C,D as I,K as B,C as Ee,I as Q,ar as D,a8 as J,k as Ne,B as re,at as de}from"../chunks/Cpz4ya2d.js";import{s as xt,d as qe}from"../chunks/C1XdH_EI.js";import{i as ae}from"../chunks/D4yeloue.js";import{b as Et,s as St,a as kt,r as he,t as De,o as E}from"../chunks/DtxwUpI1.js";import"../chunks/Bqq6gm0b.js";import{i as Tt}from"../chunks/O9_NIZmW.js";function Ot(t,e,r,s=!0){s&&r();for(var n of e)t.addEventListener(n,r);je(()=>{for(var u of e)t.removeEventListener(u,r)})}function Je(t){var e=et,r=ne;Te(null),Oe(null);try{return t()}finally{Te(e),Oe(r)}}function zt(t,e,r,s=r){t.addEventListener(e,()=>Je(r));const n=t.__on_r;n?t.__on_r=()=>{n(),s(!0)}:t.__on_r=()=>s(!0),Et()}function We(t,e){return e}function At(t,e,r,s){for(var n=[],u=e.length,i=0;i<u;i++)vt(e[i].e,n,!0);var o=u>0&&n.length===0&&r!==null;if(o){var c=r.parentNode;dt(c),c.append(r),s.clear(),G(t,e[0].prev,e[u-1].next)}ht(n,()=>{for(var g=0;g<u;g++){var f=e[g];o||(s.delete(f.k),G(t,f.prev,f.next)),_t(f.e,!o)}})}function Xe(t,e,r,s,n,u=null){var i=t,o={flags:e,items:new Map,first:null},c=(e&Re)!==0;if(c){var g=t;i=O?se(K(g)):g.appendChild(tt())}O&&me();var f=null,m=!1,h=st(()=>{var d=r();return lt(d)?d:d==null?[]:$e(d)});rt(()=>{var d=a(h),v=d.length;if(m&&v===0)return;m=v===0;let S=!1;if(O){var y=at(i)===nt;y!==(v===0)&&(i=ze(),se(i),ce(!1),S=!0)}if(O){for(var z=null,A,k=0;k<v;k++){if(R.nodeType===8&&R.data===it){i=R,S=!0,ce(!1);break}var _=d[k],l=s(_,k);A=Ue(R,o,z,null,_,l,k,n,e,r),o.items.set(l,A),z=A}v>0&&se(ze())}O||Nt(d,o,i,n,e,s,r),u!==null&&(v===0?f?Le(f):f=Pe(()=>u(i)):f!==null&&ot(f,()=>{f=null})),S&&ce(!0),a(h)}),O&&(i=R)}function Nt(t,e,r,s,n,u,i){var x,P,Z,j;var o=(n&ct)!==0,c=(n&(be|we))!==0,g=t.length,f=e.items,m=e.first,h=m,d,v=null,S,y=[],z=[],A,k,_,l;if(o)for(l=0;l<g;l+=1)A=t[l],k=u(A,l),_=f.get(k),_!==void 0&&((x=_.a)==null||x.measure(),(S??(S=new Set)).add(_));for(l=0;l<g;l+=1){if(A=t[l],k=u(A,l),_=f.get(k),_===void 0){var T=h?h.e.nodes_start:r;v=Ue(T,e,v,v===null?e.first:v.next,A,k,l,s,n,i),f.set(k,v),y=[],z=[],h=v.next;continue}if(c&&Dt(_,A,l,n),(_.e.f&ve)!==0&&(Le(_.e),o&&((P=_.a)==null||P.unfix(),(S??(S=new Set)).delete(_))),_!==h){if(d!==void 0&&d.has(_)){if(y.length<z.length){var N=z[0],b;v=N.prev;var X=y[0],U=y[y.length-1];for(b=0;b<y.length;b+=1)Me(y[b],N,r);for(b=0;b<z.length;b+=1)d.delete(z[b]);G(e,X.prev,U.next),G(e,v,X),G(e,U,N),h=N,v=U,l-=1,y=[],z=[]}else d.delete(_),Me(_,h,r),G(e,_.prev,_.next),G(e,_,v===null?e.first:v.next),G(e,v,_),v=_;continue}for(y=[],z=[];h!==null&&h.k!==k;)(h.e.f&ve)===0&&(d??(d=new Set)).add(h),z.push(h),h=h.next;if(h===null)continue;_=h}y.push(_),v=_,h=_.next}if(h!==null||d!==void 0){for(var L=d===void 0?[]:$e(d);h!==null;)(h.e.f&ve)===0&&L.push(h),h=h.next;var V=L.length;if(V>0){var F=(n&Re)!==0&&g===0?r:null;if(o){for(l=0;l<V;l+=1)(Z=L[l].a)==null||Z.measure();for(l=0;l<V;l+=1)(j=L[l].a)==null||j.fix()}At(e,L,F,f)}}o&&ft(()=>{var ee;if(S!==void 0)for(_ of S)(ee=_.a)==null||ee.apply()}),ne.first=e.first&&e.first.e,ne.last=v&&v.e}function Dt(t,e,r,s){(s&be)!==0&&Ae(t.v,e),(s&we)!==0?Ae(t.i,r):t.i=r}function Ue(t,e,r,s,n,u,i,o,c,g){var f=(c&be)!==0,m=(c&gt)===0,h=f?m?ut(n):pe(n):n,d=(c&we)===0?i:pe(i),v={i:d,v:h,k:u,a:null,e:null,prev:r,next:s};try{return v.e=Pe(()=>o(t,h,d,g),O),v.e.prev=r&&r.e,v.e.next=s&&s.e,r===null?e.first=v:(r.next=v,r.e.next=v.e),s!==null&&(s.prev=v,s.e.prev=v.e),v}finally{}}function Me(t,e,r){for(var s=t.next?t.next.e.nodes_start:r,n=e?e.e.nodes_start:r,u=t.e.nodes_start;u!==s;){var i=Ye(u);n.before(u),u=i}}function G(t,e,r){e===null?t.first=r:(e.next=r,e.e.next=r&&r.e),r!==null&&(r.prev=e,r.e.prev=e&&e.e)}function Mt(t,e,r=!1,s=!1,n=!1){var u=t,i="";W(()=>{var o=ne;if(i===(i=e()??"")){O&&me();return}if(o.nodes_start!==null&&(mt(o.nodes_start,o.nodes_end),o.nodes_start=o.nodes_end=null),i!==""){if(O){R.data;for(var c=me(),g=c;c!==null&&(c.nodeType!==8||c.data!=="");)g=c,c=Ye(c);if(c===null)throw pt(),yt;ke(R,g),u=se(c);return}var f=i+"";r?f=`<svg>${f}</svg>`:s&&(f=`<math>${f}</math>`);var m=Ze(f);if((r||s)&&(m=K(m)),ke(K(m),m.lastChild),r||s)for(;K(m);)u.before(K(m));else u.before(m)}})}function Ve(t){var e,r,s="";if(typeof t=="string"||typeof t=="number")s+=t;else if(typeof t=="object")if(Array.isArray(t)){var n=t.length;for(e=0;e<n;e++)t[e]&&(r=Ve(t[e]))&&(s&&(s+=" "),s+=r)}else for(r in t)t[r]&&(s&&(s+=" "),s+=r);return s}function Ct(){for(var t,e,r=0,s="",n=arguments.length;r<n;r++)(t=arguments[r])&&(e=Ve(t))&&(s&&(s+=" "),s+=e);return s}function ye(t){return typeof t=="object"?Ct(t):t??""}function Bt(t,e,r){var s=t==null?"":""+t;return e&&(s=s?s+" "+e:e),s===""?null:s}function Ht(t,e){return t==null?null:String(t)}function ie(t,e,r,s,n,u){var i=t.__className;if(O||i!==r||i===void 0){var o=Bt(r,s);(!O||o!==t.getAttribute("class"))&&(o==null?t.removeAttribute("class"):t.className=o),t.__className=r}return u}function Fe(t,e,r,s){var n=t.__style;if(O||n!==e){var u=Ht(e);(!O||u!==t.getAttribute("style"))&&(u==null?t.removeAttribute("style"):t.style.cssText=u),t.__style=e}return s}function _e(t,e,r=e){zt(t,"change",s=>{var n=s?t.defaultChecked:t.checked;r(n)}),(O&&t.defaultChecked!==t.checked||wt(e)==null)&&r(t.checked),bt(()=>{var s=e();t.checked=!!s})}function Ce(t,e){Ot(window,["resize"],()=>Je(()=>e(window[t])))}function Gt(t){var e=pe(0);return function(){return arguments.length===1?(p(e,a(e)+1),arguments[0]):(a(e),t())}}const $=16;function H(t,e){return t?Math.round((e-$/2)/$)*$:e}function Be(t){if(t instanceof TouchEvent){const e=t.touches[0]||t.changedTouches[0];return{x:e.clientX,y:e.clientY}}else if(t instanceof MouseEvent)return{x:t.clientX,y:t.clientY};return{x:0,y:0}}function He(t,e,r,s,n){const u=Math.abs(H(n,r)-H(n,t)),i=Math.abs(H(n,s)-H(n,e)),o=r<=t?H(n,r):H(n,t),c=s<=e?H(n,s):H(n,e);return{x:o,y:c,wdt:u,hgt:i}}var It=Y('<span class="recto-numbers svelte-vg4o7q"> </span>'),Lt=Y('<div><!> <div class="recto-inside svelte-vg4o7q"><!></div></div>');function ge(t,e){xe(e,!0),Ie(async()=>{setTimeout(()=>{const o=document.getElementById(e.id);o instanceof HTMLElement&&(o.style.width="0px",o.style.height="0px")},200)});var r=Lt(),s=C(r);{var n=o=>{var c=It(),g=C(c);B(c),W((f,m)=>xt(g,`${f??""}x${m??""}`),[()=>Math.floor(e.wdt/$),()=>Math.floor(e.hgt/$)]),M(o,c)};ae(s,o=>{(e.type==="live"||e.type==="invalid")&&o(n)})}var u=I(s,2),i=C(u);St(i,()=>e.children),B(u),B(r),W((o,c)=>{kt(r,"id",e.id),ie(r,1,`recto recto-${e.type}`,"svelte-vg4o7q"),Fe(r,`transform: translate(${e.x??""}px, ${e.y??""}px); width: ${o??""}px; height: ${c??""}px`)},[()=>e.wdt.toString(),()=>e.hgt.toString()]),M(t,r),Ee()}var w=Gt(()=>E),Pt=Y("<button></button>"),Rt=Y('<div style="z-index: 30000;" class="svelte-18zs0d2"><button class="svelte-18zs0d2"><span class="mono svelte-18zs0d2">OPTIONS</span></button> <section><label class="svelte-18zs0d2"><input type="checkbox" class="switch svelte-18zs0d2"> SHOW BORDER</label> <label class="svelte-18zs0d2"><input type="checkbox" class="switch svelte-18zs0d2"> SHOW GRID</label> <label class="svelte-18zs0d2"><input type="checkbox" class="switch svelte-18zs0d2"> SNAP TO GRID</label> <section class="cs-wrapper svelte-18zs0d2"><!> <span class="svelte-18zs0d2">COLOR SCHEME</span></section></section></div>');function $t(t,e){xe(e,!1),Tt();var r=Rt(),s=C(r);s.__click=()=>w(w().openOptions=!w().openOptions);var n=I(s,2),u=C(n),i=C(u);he(i),Q(),B(u);var o=I(u,2),c=C(o);he(c),Q(),B(o);var g=I(o,2),f=C(g);he(f),Q(),B(g);var m=I(g,2),h=C(m);Xe(h,1,()=>De,We,(d,v,S)=>{var y=Pt();y.__click=()=>w(w().colorScheme=a(v)),y.textContent=S+1,W(()=>{ie(y,1,ye(w().colorScheme.themeName==a(v).themeName&&w().colorScheme.isDark?"cs-active":w().colorScheme.themeName==a(v).themeName&&!w().colorScheme.isDark?"cs-active-light":""),"svelte-18zs0d2"),Fe(y,S==0?"border-radius: .5rem 0 0 .5rem":S==De.length-1?"border-radius: 0 .5rem .5rem 0":"")}),M(d,y)}),Q(2),B(m),B(n),B(r),W(()=>ie(n,1,ye(w().openOptions?"mono checkboxes":"mono checkboxes hidden"),"svelte-18zs0d2")),_e(i,()=>w().showBorder,d=>w(w().showBorder=d)),_e(c,()=>w().showGrid,d=>w(w().showGrid=d)),_e(f,()=>w().snapToGrid,d=>w(w().snapToGrid=d)),M(t,r),Ee()}qe(["click"]);const Yt=(t,e)=>{let r=D(J(e));{const i=localStorage.getItem(t);i&&p(r,JSON.parse(i),!0)}const s=()=>{a(r)?localStorage.setItem(t,JSON.stringify(a(r))):localStorage.removeItem(t)};return{get:()=>a(r),set:i=>{p(r,i,!0),s()}}};function Ge(t,e,r,s,n,u,i,o,c,g){if(a(e)){if(p(e,!1),p(r,{...a(r),x:-100,y:-100,wdt:0,hgt:0},!0),a(s)&&a(n)<u.length){let f={...u[a(n)],x:a(i).x,y:a(i).y,wdt:a(i).wdt,hgt:a(i).hgt};o.push(f),p(n,a(n)+1)}else if(a(s)){let f=a(n)%u.length;o[a(n)-u.length].visibility=!1;let m={...u[f],x:a(i).x,y:a(i).y,wdt:a(i).wdt,hgt:a(i).hgt};o.push(m),p(n,a(n)+1)}p(c,{x:0,y:0},!0),p(g,{x:0,y:0},!0),p(s,!1)}}var qt=Y('<p style="display: none" class="svelte-rw0o9z"></p>'),Jt=Y('<h3 class="svelte-rw0o9z">GO TO</h3> <p class="svelte-rw0o9z"><button class="disabled-btn svelte-rw0o9z">Selected projects<br class="svelte-rw0o9z"><span class="svelte-rw0o9z">(coming soon)</span></button></p>',1),Wt=Y('<div id="background"></div> <div id="foreground" role="button" tabindex="0" class="svelte-rw0o9z"><!> <!></div> <!>',1);function tr(t,e){xe(e,!0);const{STARTING_RECTOS:r}=e.data,s=Yt("options",E);let n=D(!1),u=D(0),i=D(0),o=D(!1),c=D(J({x:0,y:0})),g=D(J({x:0,y:0})),f=D(J({x:0,y:0,wdt:0,hgt:0})),m=D(!1),h=D(0),d=D(J({id:9999,x:-100,y:-100,wdt:0,hgt:0,visibility:!0})),v=J([]);function S(l){p(o,!0);const{x:T,y:N}=Be(l);p(c,{x:T,y:N},!0),p(f,He(a(c).x,a(c).y,a(c).x,a(c).y,E.snapToGrid),!0),p(d,{...a(d),x:a(f).x,y:a(f).y},!0),l instanceof TouchEvent&&l.preventDefault()}function y(l){if(a(o)){const{x:T,y:N}=Be(l);p(g,{x:T,y:N},!0),p(f,He(a(c).x,a(c).y,a(g).x,a(g).y,E.snapToGrid),!0),p(m,a(f).wdt>=$&&a(f).hgt>=$*2,!0),p(d,{...a(d),x:a(f).x,y:a(f).y,wdt:a(f).wdt,hgt:a(f).hgt},!0),l instanceof TouchEvent&&l.preventDefault()}}setTimeout(()=>{for(let l=0;l<4;l++)setTimeout(()=>{v.push(r[a(h)]),p(h,a(h)+1)},100*l)},500);function z(l){for(const[T,N]of Object.entries(l))document.documentElement.style.setProperty(`--${T}`,String(N))}Ie(()=>{{const l=localStorage.getItem("options");if(l){const T=JSON.parse(l);E.colorScheme=T.colorScheme,E.showBorder=T.showBorder,E.showGrid=T.showGrid,E.snapToGrid=T.showGrid}p(n,!0)}}),Ne(()=>z(E.colorScheme)),Ne(()=>s.set(E));var A=fe(),k=re(A);{var _=l=>{var T=Wt(),N=re(T),b=I(N,2);b.__mousedown=S,b.__mousemove=y,b.__mouseup=[Ge,o,d,m,h,r,f,v,c,g],b.__touchstart=S,b.__touchmove=y,b.__touchend=[Ge,o,d,m,h,r,f,v,c,g];var X=C(b);const U=de(()=>a(m)?"live":"invalid");ge(X,{get id(){return`r-${a(d).id??""}`},get type(){return a(U)},get x(){return a(d).x},get y(){return a(d).y},get wdt(){return a(d).wdt},get hgt(){return a(d).hgt},children:(F,x)=>{var P=qt();M(F,P)},$$slots:{default:!0}});var L=I(X,2);Xe(L,17,()=>v,We,(F,x)=>{var P=fe(),Z=re(P);{var j=q=>{const oe=de(()=>E.showBorder?"perma":"transparent");ge(q,{get id(){return`r-${a(x).id??""}`},get type(){return a(oe)},get x(){return a(x).x},get y(){return a(x).y},get wdt(){return a(x).wdt},get hgt(){return a(x).hgt},children:(le,te)=>{var ue=Jt();Q(2),M(le,ue)},$$slots:{default:!0}})},ee=(q,oe)=>{{var le=te=>{const ue=de(()=>E.showBorder?"perma":"transparent");ge(te,{get id(){return`r-${a(x).id??""}`},get type(){return a(ue)},get x(){return a(x).x},get y(){return a(x).y},get wdt(){return a(x).wdt},get hgt(){return a(x).hgt},children:(Ke,Xt)=>{var Se=fe(),Qe=re(Se);Mt(Qe,()=>a(x).content),M(Ke,Se)},$$slots:{default:!0}})};ae(q,te=>{a(x).visibility&&te(le)},oe)}};ae(Z,q=>{a(x).content==="BUTTON"&&a(x).visibility?q(j):q(ee,!1)})}M(F,P)}),B(b);var V=I(b,2);$t(V,{}),W(()=>ie(N,1,ye(E.showGrid&&E.colorScheme.isDark?"bgrid-dark":E.showGrid&&!E.colorScheme.isDark?"bgrid-light":""),"svelte-rw0o9z")),M(l,T)};ae(k,l=>{a(n)&&l(_)})}Ce("innerWidth",l=>p(u,l,!0)),Ce("innerHeight",l=>p(i,l,!0)),M(t,A),Ee()}qe(["mousedown","mousemove","mouseup","touchstart","touchmove","touchend"]);export{tr as component};
