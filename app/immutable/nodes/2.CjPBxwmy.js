import{t as H,a as O,c as U}from"../chunks/CXeFc7Ny.js";import{o as ke}from"../chunks/NWMzFNKK.js";import{i as ze,b as Oe,ac as Se,J as s,g as e,ad as $e,A as ie,K as $,D as B,O as C,M as G,F as Y,C as le,G as w,I as T,a as ee,B as L,L as F}from"../chunks/BO94aUzD.js";import{d as de}from"../chunks/CfeX_JpR.js";import{i as K}from"../chunks/DGClMfjY.js";import{l as Ge,e as ce,s as Z,c as A,i as ue,d as Be,u as De,b as te,R as q,g as se,a as re,S as oe,h as Pe}from"../chunks/06_5qHcM.js";import"../chunks/BhNrHoM_.js";import{r as Q,t as ae,o as i}from"../chunks/CrbL80z1.js";import{i as Te}from"../chunks/ZQN-UiSL.js";function X(c,l,h=l){Ge(c,"change",m=>{var n=m?c.defaultChecked:c.checked;h(n)}),(ze&&c.defaultChecked!==c.checked||Oe(l)==null)&&h(c.checked),Se(()=>{var m=l();c.checked=!!m})}function Ce(c){var l=$e(0);return function(){return arguments.length===1?(s(l,e(l)+1),arguments[0]):(e(l),c())}}var a=Ce(()=>i),He=H("<button></button>"),Ne=H('<div style="z-index: 30000;" class="svelte-18zs0d2"><button class="svelte-18zs0d2"><span class="mono svelte-18zs0d2">OPTIONS</span></button> <section><label class="svelte-18zs0d2"><input type="checkbox" class="switch svelte-18zs0d2"> SHOW BORDER</label> <label class="svelte-18zs0d2"><input type="checkbox" class="switch svelte-18zs0d2"> SHOW GRID</label> <label class="svelte-18zs0d2"><input type="checkbox" class="switch svelte-18zs0d2"> SNAP TO GRID</label> <section class="cs-wrapper svelte-18zs0d2"><!> <span class="svelte-18zs0d2">COLOR SCHEME</span></section></section></div>');function Ee(c,l){ie(l,!1),Te();var h=Ne(),m=$(h);m.__click=()=>a(a().openOptions=!a().openOptions);var n=B(m,2),f=$(n),v=$(f);Q(v),C(),G(f);var g=B(f,2),u=$(g);Q(u),C(),G(g);var _=B(g,2),r=$(_);Q(r),C(),G(_);var y=B(_,2),S=$(y);ce(S,1,()=>ae,ue,(o,x,D)=>{var k=He();k.__click=()=>a(a().colorScheme=e(x)),k.textContent=D+1,Y(()=>{Z(k,1,A(a().colorScheme.themeName==e(x).themeName&&a().colorScheme.isDark?"cs-active":a().colorScheme.themeName==e(x).themeName&&!a().colorScheme.isDark?"cs-active-light":""),"svelte-18zs0d2"),Be(k,D==0?"border-radius: .5rem 0 0 .5rem":D==ae.length-1?"border-radius: 0 .5rem .5rem 0":"")}),O(o,k)}),C(2),G(y),G(n),G(h),Y(()=>Z(n,1,A(a().openOptions?"mono checkboxes":"mono checkboxes hidden"),"svelte-18zs0d2")),X(v,()=>a().showBorder,o=>a(a().showBorder=o)),X(u,()=>a().showGrid,o=>a(a().showGrid=o)),X(r,()=>a().snapToGrid,o=>a(a().snapToGrid=o)),O(c,h),le()}de(["click"]);function ne(c,l,h,m,n,f,v,g,u,_){if(e(l)){if(s(l,!1),s(h,{...e(h),x:-100,y:-100,wdt:0,hgt:0},!0),e(m)&&e(n)<f.length){let r={...f[e(n)],x:e(v).x,y:e(v).y,wdt:e(v).wdt,hgt:e(v).hgt};g.push(r),s(n,e(n)+1)}else if(e(m)){let r=e(n)%f.length;g[e(n)-f.length].visibility=!1;let y={...f[r],x:e(v).x,y:e(v).y,wdt:e(v).wdt,hgt:e(v).hgt};g.push(y),s(n,e(n)+1)}s(u,{x:0,y:0},!0),s(_,{x:0,y:0},!0),s(m,!1)}}var Le=H('<p style="display: none" class="svelte-rw0o9z"></p>'),Me=H('<h3 class="svelte-rw0o9z">GO TO</h3> <p class="svelte-rw0o9z"><button class="disabled-btn svelte-rw0o9z">Selected projects<br class="svelte-rw0o9z"><span class="svelte-rw0o9z">(coming soon)</span></button></p>',1),We=H('<div id="background"></div> <div id="foreground" role="button" tabindex="0" class="svelte-rw0o9z"><!> <!></div> <!>',1);function Ae(c,l){ie(l,!0);const{STARTING_RECTOS:h}=l.data,m=De("options",i);let n=w(!1),f=w(0),v=w(0),g=w(!1),u=w(T({x:0,y:0})),_=w(T({x:0,y:0})),r=w(T({x:0,y:0,wdt:0,hgt:0})),y=w(!1),S=w(0),o=w(T({id:9999,x:-100,y:-100,wdt:0,hgt:0,visibility:!0})),x=T([]);function D(t){s(g,!0);const{x:p,y:z}=se(t);s(u,{x:p,y:z},!0),s(r,re(e(u).x,e(u).y,e(u).x,e(u).y,i.snapToGrid),!0),s(o,{...e(o),x:e(r).x,y:e(r).y},!0),t instanceof TouchEvent&&t.preventDefault()}function k(t){if(e(g)){const{x:p,y:z}=se(t);s(_,{x:p,y:z},!0),s(r,re(e(u).x,e(u).y,e(_).x,e(_).y,i.snapToGrid),!0),s(y,e(r).wdt>=oe&&e(r).hgt>=oe*2,!0),s(o,{...e(o),x:e(r).x,y:e(r).y,wdt:e(r).wdt,hgt:e(r).hgt},!0),t instanceof TouchEvent&&t.preventDefault()}}setTimeout(()=>{for(let t=0;t<4;t++)setTimeout(()=>{x.push(h[e(S)]),s(S,e(S)+1)},100*t)},500);function he(t){for(const[p,z]of Object.entries(t))document.documentElement.style.setProperty(`--${p}`,String(z))}ke(()=>{{const t=localStorage.getItem("options");if(t){const p=JSON.parse(t);i.colorScheme=p.colorScheme,i.showBorder=p.showBorder,i.showGrid=p.showGrid,i.snapToGrid=p.showGrid}s(n,!0)}}),ee(()=>he(i.colorScheme)),ee(()=>m.set(i));var V=U(),ve=L(V);{var pe=t=>{var p=We(),z=L(p),b=B(z,2);b.__mousedown=D,b.__mousemove=k,b.__mouseup=[ne,g,o,y,S,h,r,x,u,_],b.__touchstart=D,b.__touchmove=k,b.__touchend=[ne,g,o,y,S,h,r,x,u,_];var R=$(b);const me=F(()=>e(y)?"live":"invalid");q(R,{get id(){return`r-${e(o).id??""}`},get type(){return e(me)},get x(){return e(o).x},get y(){return e(o).y},get wdt(){return e(o).wdt},get hgt(){return e(o).hgt},children:(M,d)=>{var N=Le();O(M,N)},$$slots:{default:!0}});var ge=B(R,2);ce(ge,17,()=>x,ue,(M,d)=>{var N=U(),_e=L(N);{var we=P=>{const W=F(()=>i.showBorder?"perma":"transparent");q(P,{get id(){return`r-${e(d).id??""}`},get type(){return e(W)},get x(){return e(d).x},get y(){return e(d).y},get wdt(){return e(d).wdt},get hgt(){return e(d).hgt},children:(j,E)=>{var J=Me();C(2),O(j,J)},$$slots:{default:!0}})},ye=(P,W)=>{{var j=E=>{const J=F(()=>i.showBorder?"perma":"transparent");q(E,{get id(){return`r-${e(d).id??""}`},get type(){return e(J)},get x(){return e(d).x},get y(){return e(d).y},get wdt(){return e(d).wdt},get hgt(){return e(d).hgt},children:(be,je)=>{var I=U(),xe=L(I);Pe(xe,()=>e(d).content),O(be,I)},$$slots:{default:!0}})};K(P,E=>{e(d).visibility&&E(j)},W)}};K(_e,P=>{e(d).content==="BUTTON"&&e(d).visibility?P(we):P(ye,!1)})}O(M,N)}),G(b);var fe=B(b,2);Ee(fe,{}),Y(()=>Z(z,1,A(i.showGrid&&i.colorScheme.isDark?"bgrid-dark":i.showGrid&&!i.colorScheme.isDark?"bgrid-light":""),"svelte-rw0o9z")),O(t,p)};K(ve,t=>{e(n)&&t(pe)})}te("innerWidth",t=>s(f,t,!0)),te("innerHeight",t=>s(v,t,!0)),O(c,V),le()}de(["mousedown","mousemove","mouseup","touchstart","touchmove","touchend"]);export{Ae as component};
