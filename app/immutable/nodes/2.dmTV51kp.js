import{b as Te,e as rt,t as $,a as M,c as ce}from"../chunks/Drtdu_nf.js";import{o as Pe}from"../chunks/7YcfCxfa.js";import{ao as st,K as Ae,L as Oe,N as at,O as ne,s as se,h as S,Q as F,_ as nt,a as me,b as it,q as a,a9 as ot,r as lt,c as ft,d as De,e as ue,i as P,T as ct,f as qe,g as Ye,p as ut,ap as $e,Y as Ue,M as dt,ae as vt,aq as pe,ar as de,a4 as ht,as as xe,at as _t,au as ke,av as ze,aw as gt,X as mt,ax as pt,j as bt,ay as yt,R as We,C as W,az as wt,V as xt,S as kt,aA as St,aB as Et,aC as Nt,aD as Tt,aE as At,o as Ot,a3 as Dt,ad as p,B as Se,F as L,I,G as C,D as Ee,ac as q,A as Q,al as z,l as Me,y as re,an as ve}from"../chunks/BFPP-6fK.js";import{s as zt,d as Xe}from"../chunks/C6ufSfvN.js";import{i as ae}from"../chunks/Dk0dYWdK.js";import{s as Mt}from"../chunks/BTAYD7-3.js";import"../chunks/BBvYfSj4.js";import{i as Lt}from"../chunks/D6XMVIW4.js";let Le=!1;function Je(){Le||(Le=!0,document.addEventListener("reset",e=>{Promise.resolve().then(()=>{var t;if(!e.defaultPrevented)for(const r of e.target.elements)(t=r.__on_r)==null||t.call(r)})},{capture:!0}))}function Ct(e,t,r,s=!0){s&&r();for(var n of t)e.addEventListener(n,r);st(()=>{for(var i of t)e.removeEventListener(i,r)})}function Ve(e){var t=at,r=ne;Ae(null),Oe(null);try{return e()}finally{Ae(t),Oe(r)}}function Gt(e,t,r,s=r){e.addEventListener(t,()=>Ve(r));const n=e.__on_r;n?e.__on_r=()=>{n(),s(!0)}:e.__on_r=()=>s(!0),Je()}function Ke(e,t){return t}function Ht(e,t,r,s){for(var n=[],i=t.length,o=0;o<i;o++)gt(t[o].e,n,!0);var l=i>0&&n.length===0&&r!==null;if(l){var u=r.parentNode;mt(u),u.append(r),s.clear(),H(e,t[0].prev,t[i-1].next)}pt(n,()=>{for(var g=0;g<i;g++){var c=t[g];l||(s.delete(c.k),H(e,c.prev,c.next)),bt(c.e,!l)}})}function Fe(e,t,r,s,n,i=null){var o=e,l={flags:t,items:new Map,first:null},u=(t&$e)!==0;if(u){var g=e;o=S?se(F(g)):g.appendChild(nt())}S&&me();var c=null,m=!1,h=ot(()=>{var v=r();return dt(v)?v:v==null?[]:Ue(v)});it(()=>{var v=a(h),d=v.length;if(m&&d===0)return;m=d===0;let E=!1;if(S){var b=lt(o)===ft;b!==(d===0)&&(o=De(),se(o),ue(!1),E=!0)}if(S){for(var A=null,O,N=0;N<d;N++){if(P.nodeType===8&&P.data===ct){o=P,E=!0,ue(!1);break}var _=v[N],f=s(_,N);O=Qe(P,l,A,null,_,f,N,n,t,r),l.items.set(f,O),A=O}d>0&&se(De())}S||It(v,l,o,n,t,s,r),i!==null&&(d===0?c?qe(c):c=Ye(()=>i(o)):c!==null&&ut(c,()=>{c=null})),E&&ue(!0),a(h)}),S&&(o=P)}function It(e,t,r,s,n,i,o){var x,R,Z,j;var l=(n&_t)!==0,u=(n&(ke|xe))!==0,g=e.length,c=t.items,m=t.first,h=m,v,d=null,E,b=[],A=[],O,N,_,f;if(l)for(f=0;f<g;f+=1)O=e[f],N=i(O,f),_=c.get(N),_!==void 0&&((x=_.a)==null||x.measure(),(E??(E=new Set)).add(_));for(f=0;f<g;f+=1){if(O=e[f],N=i(O,f),_=c.get(N),_===void 0){var T=h?h.e.nodes_start:r;d=Qe(T,t,d,d===null?t.first:d.next,O,N,f,s,n,o),c.set(N,d),b=[],A=[],h=d.next;continue}if(u&&Bt(_,O,f,n),(_.e.f&de)!==0&&(qe(_.e),l&&((R=_.a)==null||R.unfix(),(E??(E=new Set)).delete(_))),_!==h){if(v!==void 0&&v.has(_)){if(b.length<A.length){var D=A[0],w;d=D.prev;var X=b[0],J=b[b.length-1];for(w=0;w<b.length;w+=1)Ce(b[w],D,r);for(w=0;w<A.length;w+=1)v.delete(A[w]);H(t,X.prev,J.next),H(t,d,X),H(t,J,D),h=D,d=J,f-=1,b=[],A=[]}else v.delete(_),Ce(_,h,r),H(t,_.prev,_.next),H(t,_,d===null?t.first:d.next),H(t,d,_),d=_;continue}for(b=[],A=[];h!==null&&h.k!==N;)(h.e.f&de)===0&&(v??(v=new Set)).add(h),A.push(h),h=h.next;if(h===null)continue;_=h}b.push(_),d=_,h=_.next}if(h!==null||v!==void 0){for(var B=v===void 0?[]:Ue(v);h!==null;)(h.e.f&de)===0&&B.push(h),h=h.next;var V=B.length;if(V>0){var K=(n&$e)!==0&&g===0?r:null;if(l){for(f=0;f<V;f+=1)(Z=B[f].a)==null||Z.measure();for(f=0;f<V;f+=1)(j=B[f].a)==null||j.fix()}Ht(t,B,K,c)}}l&&ht(()=>{var ee;if(E!==void 0)for(_ of E)(ee=_.a)==null||ee.apply()}),ne.first=t.first&&t.first.e,ne.last=d&&d.e}function Bt(e,t,r,s){(s&ke)!==0&&ze(e.v,t),(s&xe)!==0?ze(e.i,r):e.i=r}function Qe(e,t,r,s,n,i,o,l,u,g){var c=(u&ke)!==0,m=(u&yt)===0,h=c?m?vt(n):pe(n):n,v=(u&xe)===0?o:pe(o),d={i:v,v:h,k:i,a:null,e:null,prev:r,next:s};try{return d.e=Ye(()=>l(e,h,v,g),S),d.e.prev=r&&r.e,d.e.next=s&&s.e,r===null?t.first=d:(r.next=d,r.e.next=d.e),s!==null&&(s.prev=d,s.e.prev=d.e),d}finally{}}function Ce(e,t,r){for(var s=e.next?e.next.e.nodes_start:r,n=t?t.e.nodes_start:r,i=e.e.nodes_start;i!==s;){var o=We(i);n.before(i),i=o}}function H(e,t,r){t===null?e.first=r:(t.next=r,t.e.next=r&&r.e),r!==null&&(r.prev=t,r.e.prev=t&&t.e)}function Rt(e,t,r=!1,s=!1,n=!1){var i=e,o="";W(()=>{var l=ne;if(o===(o=t()??"")){S&&me();return}if(l.nodes_start!==null&&(wt(l.nodes_start,l.nodes_end),l.nodes_start=l.nodes_end=null),o!==""){if(S){P.data;for(var u=me(),g=u;u!==null&&(u.nodeType!==8||u.data!=="");)g=u,u=We(u);if(u===null)throw xt(),kt;Te(P,g),i=se(u);return}var c=o+"";r?c=`<svg>${c}</svg>`:s&&(c=`<math>${c}</math>`);var m=rt(c);if((r||s)&&(m=F(m)),Te(F(m),m.lastChild),r||s)for(;F(m);)i.before(F(m));else i.before(m)}})}function Ze(e){var t,r,s="";if(typeof e=="string"||typeof e=="number")s+=e;else if(typeof e=="object")if(Array.isArray(e)){var n=e.length;for(t=0;t<n;t++)e[t]&&(r=Ze(e[t]))&&(s&&(s+=" "),s+=r)}else for(r in e)e[r]&&(s&&(s+=" "),s+=r);return s}function Pt(){for(var e,t,r=0,s="",n=arguments.length;r<n;r++)(e=arguments[r])&&(t=Ze(e))&&(s&&(s+=" "),s+=t);return s}function be(e){return typeof e=="object"?Pt(e):e??""}function qt(e,t,r){var s=e==null?"":""+e;return t&&(s=s?s+" "+t:t),s===""?null:s}function Yt(e,t){return e==null?null:String(e)}function ie(e,t,r,s,n,i){var o=e.__className;if(S||o!==r||o===void 0){var l=qt(r,s);(!S||l!==e.getAttribute("class"))&&(l==null?e.removeAttribute("class"):e.className=l),e.__className=r}return i}function je(e,t,r,s){var n=e.__style;if(S||n!==t){var i=Yt(t);(!S||i!==e.getAttribute("style"))&&(i==null?e.removeAttribute("style"):e.style.cssText=i),e.__style=t}return s}const $t=Symbol("is custom element"),Ut=Symbol("is html");function he(e){if(S){var t=!1,r=()=>{if(!t){if(t=!0,e.hasAttribute("value")){var s=e.value;ye(e,"value",null),e.value=s}if(e.hasAttribute("checked")){var n=e.checked;ye(e,"checked",null),e.checked=n}}};e.__on_r=r,St(r),Je()}}function ye(e,t,r,s){var n=Wt(e);S&&(n[t]=e.getAttribute(t),t==="src"||t==="srcset"||t==="href"&&e.nodeName==="LINK")||n[t]!==(n[t]=r)&&(t==="loading"&&(e[Tt]=r),r==null?e.removeAttribute(t):typeof r!="string"&&Xt(e).includes(t)?e[t]=r:e.setAttribute(t,r))}function Wt(e){return e.__attributes??(e.__attributes={[$t]:e.nodeName.includes("-"),[Ut]:e.namespaceURI===Et})}var Ge=new Map;function Xt(e){var t=Ge.get(e.nodeName);if(t)return t;Ge.set(e.nodeName,t=[]);for(var r,s=e,n=Element.prototype;n!==s;){r=At(s);for(var i in r)r[i].set&&t.push(i);s=Nt(s)}return t}function _e(e,t,r=t){Gt(e,"change",s=>{var n=s?e.defaultChecked:e.checked;r(n)}),(S&&e.defaultChecked!==e.checked||Ot(t)==null)&&r(e.checked),Dt(()=>{var s=t();e.checked=!!s})}function He(e,t){Ct(window,["resize"],()=>Ve(()=>t(window[e])))}function Jt(e){var t=pe(0);return function(){return arguments.length===1?(p(t,a(t)+1),arguments[0]):(a(t),e())}}const Y=16;function G(e,t){return e?Math.round((t-Y/2)/Y)*Y:t}function Ie(e){if(e instanceof TouchEvent){const t=e.touches[0]||e.changedTouches[0];return{x:t.clientX,y:t.clientY}}else if(e instanceof MouseEvent)return{x:e.clientX,y:e.clientY};return{x:0,y:0}}function Be(e,t,r,s,n){const i=Math.abs(G(n,r)-G(n,e)),o=Math.abs(G(n,s)-G(n,t)),l=r<=e?G(n,r):G(n,e),u=s<=t?G(n,s):G(n,t);return{x:l,y:u,wdt:i,hgt:o}}var Vt=$('<span class="recto-numbers svelte-vg4o7q"> </span>'),Kt=$('<div><!> <div class="recto-inside svelte-vg4o7q"><!></div></div>');function ge(e,t){Se(t,!0),Pe(async()=>{setTimeout(()=>{const l=document.getElementById(t.id);l instanceof HTMLElement&&(l.style.width="0px",l.style.height="0px")},200)});var r=Kt(),s=L(r);{var n=l=>{var u=Vt(),g=L(u);C(u),W((c,m)=>zt(g,`${c??""}x${m??""}`),[()=>Math.floor(t.wdt/Y),()=>Math.floor(t.hgt/Y)]),M(l,u)};ae(s,l=>{(t.type==="live"||t.type==="invalid")&&l(n)})}var i=I(s,2),o=L(i);Mt(o,()=>t.children),C(i),C(r),W((l,u)=>{ye(r,"id",t.id),ie(r,1,`recto recto-${t.type}`,"svelte-vg4o7q"),je(r,`transform: translate(${t.x??""}px, ${t.y??""}px); width: ${l??""}px; height: ${u??""}px`)},[()=>t.wdt.toString(),()=>t.hgt.toString()]),M(e,r),Ee()}const Ft={themeName:"defaultDark",isDark:!0,fg:"#d0d0d0",bg:"#111111",liveborder:"#d2fb85",live:"#151815",permaborder:"#869280",perma:"#111111",invalid:"#ff3713"},Qt={themeName:"lightNice",isDark:!1,fg:"#000",bg:"#fff",liveborder:"#4e02feff",live:"#9368ff50",permaborder:"#858585",perma:"#e0e0e050",invalid:"#ff00ff"},Zt={themeName:"darkGreen",isDark:!0,fg:"#ddedc4",bg:"#070b0a",liveborder:"#4b4375",live:"#0b0a11",permaborder:"#73ad9dff",perma:"#131a18",invalid:"#ff3effAA"},jt={themeName:"light1",isDark:!1,fg:"#111",bg:"#e1efd5",liveborder:"#838383",live:"HoneyDew",permaborder:"#515c2fff",perma:"#e1efd5",invalid:"#832b2bAA"},er={themeName:"brownRed",isDark:!0,fg:"#d3d3d3",bg:"#271e1b",liveborder:"#aaa",live:"#271e1b",permaborder:"#ff0022",perma:"#291c1c",invalid:"#ff0022"},we=[Ft,jt,er,Qt,Zt],k=q({openOptions:!1,showBorder:!0,showGrid:!0,snapToGrid:!0,openDrawer:!1,colorScheme:we[0]});var y=Jt(()=>k),tr=$("<button></button>"),rr=$('<div style="z-index: 30000;" class="svelte-18zs0d2"><button class="svelte-18zs0d2"><span class="mono svelte-18zs0d2">OPTIONS</span></button> <section><label class="svelte-18zs0d2"><input type="checkbox" class="switch svelte-18zs0d2"> SHOW BORDER</label> <label class="svelte-18zs0d2"><input type="checkbox" class="switch svelte-18zs0d2"> SHOW GRID</label> <label class="svelte-18zs0d2"><input type="checkbox" class="switch svelte-18zs0d2"> SNAP TO GRID</label> <section class="cs-wrapper svelte-18zs0d2"><!> <span class="svelte-18zs0d2">COLOR SCHEME</span></section></section></div>');function sr(e,t){Se(t,!1),Lt();var r=rr(),s=L(r);s.__click=()=>y(y().openOptions=!y().openOptions);var n=I(s,2),i=L(n),o=L(i);he(o),Q(),C(i);var l=I(i,2),u=L(l);he(u),Q(),C(l);var g=I(l,2),c=L(g);he(c),Q(),C(g);var m=I(g,2),h=L(m);Fe(h,1,()=>we,Ke,(v,d,E)=>{var b=tr();b.__click=()=>y(y().colorScheme=a(d)),b.textContent=E+1,W(()=>{ie(b,1,be(y().colorScheme.themeName==a(d).themeName&&y().colorScheme.isDark?"cs-active":y().colorScheme.themeName==a(d).themeName&&!y().colorScheme.isDark?"cs-active-light":""),"svelte-18zs0d2"),je(b,E==0?"border-radius: .5rem 0 0 .5rem":E==we.length-1?"border-radius: 0 .5rem .5rem 0":"")}),M(v,b)}),Q(2),C(m),C(n),C(r),W(()=>ie(n,1,be(y().openOptions?"mono checkboxes":"mono checkboxes hidden"),"svelte-18zs0d2")),_e(o,()=>y().showBorder,v=>y(y().showBorder=v)),_e(u,()=>y().showGrid,v=>y(y().showGrid=v)),_e(c,()=>y().snapToGrid,v=>y(y().snapToGrid=v)),M(e,r),Ee()}Xe(["click"]);const ar=(e,t)=>{let r=z(q(t));{const o=localStorage.getItem(e);o&&p(r,JSON.parse(o),!0)}const s=()=>{a(r)?localStorage.setItem(e,JSON.stringify(a(r))):localStorage.removeItem(e)};return{get:()=>a(r),set:o=>{p(r,o,!0),s()}}};function Re(e,t,r,s,n,i,o,l,u,g){if(a(t)){if(p(t,!1),p(r,{...a(r),x:-100,y:-100,wdt:0,hgt:0},!0),a(s)&&a(n)<i.length){let c={...i[a(n)],x:a(o).x,y:a(o).y,wdt:a(o).wdt,hgt:a(o).hgt};l.push(c),p(n,a(n)+1)}else if(a(s)){let c=a(n)%i.length;l[a(n)-i.length].visibility=!1;let m={...i[c],x:a(o).x,y:a(o).y,wdt:a(o).wdt,hgt:a(o).hgt};l.push(m),p(n,a(n)+1)}p(u,{x:0,y:0},!0),p(g,{x:0,y:0},!0),p(s,!1)}}var nr=$('<p style="display: none" class="svelte-rw0o9z"></p>'),ir=$('<h3 class="svelte-rw0o9z">GO TO</h3> <p class="svelte-rw0o9z"><button class="disabled-btn svelte-rw0o9z">Selected projects<br class="svelte-rw0o9z"><span class="svelte-rw0o9z">(coming soon)</span></button></p>',1),or=$('<div id="background"></div> <div id="foreground" role="button" tabindex="0" class="svelte-rw0o9z"><!> <!></div> <!>',1);function mr(e,t){Se(t,!0);const{STARTING_RECTOS:r}=t.data,s=ar("options",k);let n=z(!1),i=z(0),o=z(0),l=z(!1),u=z(q({x:0,y:0})),g=z(q({x:0,y:0})),c=z(q({x:0,y:0,wdt:0,hgt:0})),m=z(!1),h=z(0),v=z(q({id:9999,x:-100,y:-100,wdt:0,hgt:0,visibility:!0})),d=q([]);function E(f){p(l,!0);const{x:T,y:D}=Ie(f);p(u,{x:T,y:D},!0),p(c,Be(a(u).x,a(u).y,a(u).x,a(u).y,k.snapToGrid),!0),p(v,{...a(v),x:a(c).x,y:a(c).y},!0),f instanceof TouchEvent&&f.preventDefault()}function b(f){if(a(l)){const{x:T,y:D}=Ie(f);p(g,{x:T,y:D},!0),p(c,Be(a(u).x,a(u).y,a(g).x,a(g).y,k.snapToGrid),!0),p(m,a(c).wdt>=Y&&a(c).hgt>=Y*2,!0),p(v,{...a(v),x:a(c).x,y:a(c).y,wdt:a(c).wdt,hgt:a(c).hgt},!0),f instanceof TouchEvent&&f.preventDefault()}}setTimeout(()=>{for(let f=0;f<4;f++)setTimeout(()=>{d.push(r[a(h)]),p(h,a(h)+1)},100*f)},500);function A(f){for(const[T,D]of Object.entries(f))document.documentElement.style.setProperty(`--${T}`,String(D))}Pe(()=>{{const f=localStorage.getItem("options");if(f){const T=JSON.parse(f);k.colorScheme=T.colorScheme,k.showBorder=T.showBorder,k.showGrid=T.showGrid,k.snapToGrid=T.showGrid}p(n,!0)}}),Me(()=>A(k.colorScheme)),Me(()=>s.set(k));var O=ce(),N=re(O);{var _=f=>{var T=or(),D=re(T),w=I(D,2);w.__mousedown=E,w.__mousemove=b,w.__mouseup=[Re,l,v,m,h,r,c,d,u,g],w.__touchstart=E,w.__touchmove=b,w.__touchend=[Re,l,v,m,h,r,c,d,u,g];var X=L(w);const J=ve(()=>a(m)?"live":"invalid");ge(X,{get id(){return`r-${a(v).id??""}`},get type(){return a(J)},get x(){return a(v).x},get y(){return a(v).y},get wdt(){return a(v).wdt},get hgt(){return a(v).hgt},children:(K,x)=>{var R=nr();M(K,R)},$$slots:{default:!0}});var B=I(X,2);Fe(B,17,()=>d,Ke,(K,x)=>{var R=ce(),Z=re(R);{var j=U=>{const oe=ve(()=>k.showBorder?"perma":"transparent");ge(U,{get id(){return`r-${a(x).id??""}`},get type(){return a(oe)},get x(){return a(x).x},get y(){return a(x).y},get wdt(){return a(x).wdt},get hgt(){return a(x).hgt},children:(le,te)=>{var fe=ir();Q(2),M(le,fe)},$$slots:{default:!0}})},ee=(U,oe)=>{{var le=te=>{const fe=ve(()=>k.showBorder?"perma":"transparent");ge(te,{get id(){return`r-${a(x).id??""}`},get type(){return a(fe)},get x(){return a(x).x},get y(){return a(x).y},get wdt(){return a(x).wdt},get hgt(){return a(x).hgt},children:(et,lr)=>{var Ne=ce(),tt=re(Ne);Rt(tt,()=>a(x).content),M(et,Ne)},$$slots:{default:!0}})};ae(U,te=>{a(x).visibility&&te(le)},oe)}};ae(Z,U=>{a(x).content==="BUTTON"&&a(x).visibility?U(j):U(ee,!1)})}M(K,R)}),C(w);var V=I(w,2);sr(V,{}),W(()=>ie(D,1,be(k.showGrid&&k.colorScheme.isDark?"bgrid-dark":k.showGrid&&!k.colorScheme.isDark?"bgrid-light":""),"svelte-rw0o9z")),M(f,T)};ae(N,f=>{a(n)&&f(_)})}He("innerWidth",f=>p(i,f,!0)),He("innerHeight",f=>p(o,f,!0)),M(e,O),Ee()}Xe(["mousedown","mousemove","mouseup","touchstart","touchmove","touchend"]);export{mr as component};
