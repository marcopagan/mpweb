import{c as E,a as G,t as q}from"../chunks/CXeFc7Ny.js";import{o as R}from"../chunks/NWMzFNKK.js";import{A as I,G as l,I as w,g as t,J as o,a as H,B as D,C as tt,D as J,K as et,L as W,M as ot,F as st}from"../chunks/BO94aUzD.js";import{d as rt}from"../chunks/CfeX_JpR.js";import{i as at}from"../chunks/DGClMfjY.js";import{u as nt,b as j,R as z,e as it,i as dt,s as ut,c as lt,g as C,a as F,S as K,h as ht}from"../chunks/06_5qHcM.js";import{o as r}from"../chunks/CrbL80z1.js";function U(P,_,b,c,n,y,u,h,i,f){if(t(_)){if(o(_,!1),o(b,{...t(b),x:-100,y:-100,wdt:0,hgt:0},!0),t(c)&&t(n)<y.length){let s={...y[t(n)],x:t(u).x,y:t(u).y,wdt:t(u).wdt,hgt:t(u).hgt};h.push(s),o(n,t(n)+1)}else if(t(c)){let s=t(n)%y.length,v={...y[s],id:h.length+t(n),x:t(u).x,y:t(u).y,wdt:t(u).wdt,hgt:t(u).hgt};h.push(v),o(n,t(n)+1)}o(i,{x:0,y:0},!0),o(f,{x:0,y:0},!0),o(c,!1)}}var gt=q('<p style="display: none" class="svelte-3ussab"></p>'),pt=q('<div id="background"></div> <div id="foreground" role="button" tabindex="0" class="svelte-3ussab"><!> <!></div>',1);function bt(P,_){I(_,!0);const b=nt("options",r),c=[{id:0,x:16,y:16,wdt:300,hgt:48,visibility:!0,content:"<p><h3>404 Page Not found</h3><a href='https://marcopagan.com'>Go back to the homepage</a></p>"}];let n=l(!1),y=l(0),u=l(0),h=l(!1),i=l(w({x:0,y:0})),f=l(w({x:0,y:0})),s=l(w({x:0,y:0,wdt:0,hgt:0})),v=l(!1),x=l(0),d=l(w({id:9999,x:-100,y:-100,wdt:0,hgt:0,visibility:!0})),$=w([]);function B(e){o(h,!0);const{x:a,y:g}=C(e);o(i,{x:a,y:g},!0),o(s,F(t(i).x,t(i).y,t(i).x,t(i).y,r.snapToGrid),!0),o(d,{...t(d),x:t(s).x,y:t(s).y},!0),e instanceof TouchEvent&&e.preventDefault()}function L(e){if(t(h)){const{x:a,y:g}=C(e);o(f,{x:a,y:g},!0),o(s,F(t(i).x,t(i).y,t(f).x,t(f).y,r.snapToGrid),!0),o(v,t(s).wdt>=K&&t(s).hgt>=K*2,!0),o(d,{...t(d),x:t(s).x,y:t(s).y,wdt:t(s).wdt,hgt:t(s).hgt},!0),e instanceof TouchEvent&&e.preventDefault()}}setTimeout(()=>{for(let e=0;e<1;e++)setTimeout(()=>{$.push(c[t(x)]),o(x,t(x)+1)},100*e)},500);function N(e){for(const[a,g]of Object.entries(e))document.documentElement.style.setProperty(`--${a}`,String(g))}R(()=>{{const e=localStorage.getItem("options");if(e){const a=JSON.parse(e);r.colorScheme=a.colorScheme,r.showBorder=a.showBorder,r.showGrid=a.showGrid,r.snapToGrid=a.showGrid}o(n,!0)}}),H(()=>N(r.colorScheme)),H(()=>b.set(r));var M=E(),Q=D(M);{var X=e=>{var a=pt(),g=D(a),p=J(g,2);p.__mousedown=B,p.__mousemove=L,p.__mouseup=[U,h,d,v,x,c,s,$,i,f],p.__touchstart=B,p.__touchmove=L,p.__touchend=[U,h,d,v,x,c,s,$,i,f];var O=et(p);const Y=W(()=>t(v)?"live":"invalid");z(O,{get id(){return`r-${t(d).id??""}`},get type(){return t(Y)},get x(){return t(d).x},get y(){return t(d).y},get wdt(){return t(d).wdt},get hgt(){return t(d).hgt},children:(S,m)=>{var k=gt();G(S,k)},$$slots:{default:!0}});var Z=J(O,2);it(Z,17,()=>$,dt,(S,m)=>{const k=W(()=>r.showBorder?"perma":"transparent");z(S,{get id(){return`r-${t(m).id??""}`},get type(){return t(k)},get x(){return t(m).x},get y(){return t(m).y},get wdt(){return t(m).wdt},get hgt(){return t(m).hgt},children:(A,ct)=>{var T=E(),V=D(T);ht(V,()=>t(m).content),G(A,T)},$$slots:{default:!0}})}),ot(p),st(()=>ut(g,1,lt(r.showGrid&&r.colorScheme.isDark?"bgrid-dark":r.showGrid&&!r.colorScheme.isDark?"bgrid-light":""),"svelte-3ussab")),G(e,a)};at(Q,e=>{t(n)&&e(X)})}j("innerWidth",e=>o(y,e,!0)),j("innerHeight",e=>o(u,e,!0)),G(P,M),tt()}rt(["mousedown","mousemove","mouseup","touchstart","touchmove","touchend"]);export{bt as component};
