import{c as O,a as $,t as T}from"../chunks/CXeFc7Ny.js";import{o as V}from"../chunks/NWMzFNKK.js";import{A as R,G as h,I as v,g as t,J as r,a as H,B as P,C as I,D as J,K as tt,L as W,M as et,F as rt}from"../chunks/BO94aUzD.js";import{d as st}from"../chunks/CfeX_JpR.js";import{i as ot}from"../chunks/DGClMfjY.js";import{u as at,b as j,R as z,e as it,i as nt,s as dt,c as lt,g as C,a as F,S as K,h as ht}from"../chunks/BhJkmR3e.js";import{o}from"../chunks/CrbL80z1.js";function ut(B,w,_,f,i,c,n,g,d,m){if(t(w)){if(r(w,!1),r(_,{...t(_),x:-100,y:-100,wdt:0,hgt:0},!0),t(f)&&t(i)<c.length){let s={...c[t(i)],x:t(n).x,y:t(n).y,wdt:t(n).wdt,hgt:t(n).hgt};g.push(s),r(i,t(i)+1)}else if(t(f)){let s=t(i)%c.length,y={...c[s],id:g.length+t(i),x:t(n).x,y:t(n).y,wdt:t(n).wdt,hgt:t(n).hgt};g.push(y),r(i,t(i)+1)}r(d,{x:0,y:0},!0),r(m,{x:0,y:0},!0),r(f,!1)}}var gt=T('<p style="display: none" class="svelte-3ussab"></p>'),pt=T('<div id="background"></div> <div id="foreground" role="button" tabindex="0" class="svelte-3ussab"><!> <!></div>',1);function bt(B,w){R(w,!0);const _=at("options",o),f=[{id:0,x:16,y:16,wdt:300,hgt:48,visibility:!0,content:"<p><h3>404 Page Not found</h3><a href='https://www.marcopagan.com'>Go back to the homepage</a></p>"}];let i=h(!1),c=h(0),n=h(0),g=h(!1),d=h(v({x:0,y:0})),m=h(v({x:0,y:0})),s=h(v({x:0,y:0,wdt:0,hgt:0})),y=h(!1),b=h(0),l=h(v({id:9999,x:-100,y:-100,wdt:0,hgt:0,visibility:!0})),G=v([]);function U(e){r(g,!0);const{x:a,y:u}=C(e);r(d,{x:a,y:u},!0),r(s,F(t(d).x,t(d).y,t(d).x,t(d).y,o.snapToGrid),!0),r(l,{...t(l),x:t(s).x,y:t(s).y},!0)}function q(e){if(t(g)){const{x:a,y:u}=C(e);r(m,{x:a,y:u},!0),r(s,F(t(d).x,t(d).y,t(m).x,t(m).y,o.snapToGrid),!0),r(y,t(s).wdt>=K&&t(s).hgt>=K*2,!0),r(l,{...t(l),x:t(s).x,y:t(s).y,wdt:t(s).wdt,hgt:t(s).hgt},!0)}}setTimeout(()=>{for(let e=0;e<1;e++)setTimeout(()=>{G.push(f[t(b)]),r(b,t(b)+1)},100*e)},500);function E(e){for(const[a,u]of Object.entries(e))document.documentElement.style.setProperty(`--${a}`,String(u))}V(()=>{{const e=localStorage.getItem("options");if(e){const a=JSON.parse(e);o.colorScheme=a.colorScheme,o.showBorder=a.showBorder,o.showGrid=a.showGrid,o.snapToGrid=a.showGrid}r(i,!0)}}),H(()=>E(o.colorScheme)),H(()=>_.set(o));var D=O(),N=P(D);{var Q=e=>{var a=pt(),u=P(a),x=J(u,2);x.__pointerdown=U,x.__pointermove=q,x.__pointerup=[ut,g,l,y,b,f,s,G,d,m];var L=tt(x);const X=W(()=>t(y)?"live":"invalid");z(L,{get id(){return`r-${t(l).id??""}`},get type(){return t(X)},get x(){return t(l).x},get y(){return t(l).y},get wdt(){return t(l).wdt},get hgt(){return t(l).hgt},children:(S,p)=>{var k=gt();$(S,k)},$$slots:{default:!0}});var Y=J(L,2);it(Y,17,()=>G,nt,(S,p)=>{const k=W(()=>o.showBorder?"perma":"transparent");z(S,{get id(){return`r-${t(p).id??""}`},get type(){return t(k)},get x(){return t(p).x},get y(){return t(p).y},get wdt(){return t(p).wdt},get hgt(){return t(p).hgt},children:(Z,ft)=>{var M=O(),A=P(M);ht(A,()=>t(p).content),$(Z,M)},$$slots:{default:!0}})}),et(x),rt(()=>dt(u,1,lt(o.showGrid&&o.colorScheme.isDark?"bgrid-dark":o.showGrid&&!o.colorScheme.isDark?"bgrid-light":""),"svelte-3ussab")),$(e,a)};ot(N,e=>{t(i)&&e(Q)})}j("innerWidth",e=>r(c,e,!0)),j("innerHeight",e=>r(n,e,!0)),$(B,D),I()}st(["pointerdown","pointermove","pointerup"]);export{bt as component};
