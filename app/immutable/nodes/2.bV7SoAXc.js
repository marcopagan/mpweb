import{t as N,a as x,c as U}from"../chunks/CXeFc7Ny.js";import{o as xe}from"../chunks/NWMzFNKK.js";import{i as ke,b as ze,ac as Oe,J as s,g as e,ad as Se,A as ne,K as O,D as $,O as H,M as S,F as Y,C as ie,G as w,I as C,a as ee,B as M,L as F}from"../chunks/BO94aUzD.js";import{d as le}from"../chunks/CfeX_JpR.js";import{i as K}from"../chunks/DGClMfjY.js";import{l as $e,e as de,s as Z,c as A,i as ce,d as Ge,u as Be,b as te,R as q,g as se,a as re,S as oe,h as De}from"../chunks/BhJkmR3e.js";import"../chunks/BhNrHoM_.js";import{r as Q,t as ae,o as i}from"../chunks/CrbL80z1.js";import{i as Pe}from"../chunks/ZQN-UiSL.js";function X(c,l,p=l){$e(c,"change",g=>{var n=g?c.defaultChecked:c.checked;p(n)}),(ke&&c.defaultChecked!==c.checked||ze(l)==null)&&p(c.checked),Oe(()=>{var g=l();c.checked=!!g})}function Ce(c){var l=Se(0);return function(){return arguments.length===1?(s(l,e(l)+1),arguments[0]):(e(l),c())}}var r=Ce(()=>i),He=N("<button></button>"),Ne=N('<div style="z-index: 30000;" class="svelte-18zs0d2"><button class="svelte-18zs0d2"><span class="mono svelte-18zs0d2">OPTIONS</span></button> <section><label class="svelte-18zs0d2"><input type="checkbox" class="switch svelte-18zs0d2"> SHOW BORDER</label> <label class="svelte-18zs0d2"><input type="checkbox" class="switch svelte-18zs0d2"> SHOW GRID</label> <label class="svelte-18zs0d2"><input type="checkbox" class="switch svelte-18zs0d2"> SNAP TO GRID</label> <section class="cs-wrapper svelte-18zs0d2"><!> <span class="svelte-18zs0d2">COLOR SCHEME</span></section></section></div>');function Te(c,l){ne(l,!1),Pe();var p=Ne(),g=O(p);g.__click=()=>r(r().openOptions=!r().openOptions);var n=$(g,2),m=O(n),h=O(m);Q(h),H(),S(m);var f=$(m,2),v=O(f);Q(v),H(),S(f);var _=$(f,2),o=O(_);Q(o),H(),S(_);var y=$(_,2),G=O(y);de(G,1,()=>ae,ce,(a,k,P)=>{var z=He();z.__click=()=>r(r().colorScheme=e(k)),z.textContent=P+1,Y(()=>{Z(z,1,A(r().colorScheme.themeName==e(k).themeName&&r().colorScheme.isDark?"cs-active":r().colorScheme.themeName==e(k).themeName&&!r().colorScheme.isDark?"cs-active-light":""),"svelte-18zs0d2"),Ge(z,P==0?"border-radius: .5rem 0 0 .5rem":P==ae.length-1?"border-radius: 0 .5rem .5rem 0":"")}),x(a,z)}),H(2),S(y),S(n),S(p),Y(()=>Z(n,1,A(r().openOptions?"mono checkboxes":"mono checkboxes hidden"),"svelte-18zs0d2")),X(h,()=>r().showBorder,a=>r(r().showBorder=a)),X(v,()=>r().showGrid,a=>r(r().showGrid=a)),X(o,()=>r().snapToGrid,a=>r(r().snapToGrid=a)),x(c,p),ie()}le(["click"]);function Le(c,l,p,g,n,m,h,f,v,_){if(e(l)){if(s(l,!1),s(p,{...e(p),x:-100,y:-100,wdt:0,hgt:0},!0),e(g)&&e(n)<m.length){let o={...m[e(n)],x:e(h).x,y:e(h).y,wdt:e(h).wdt,hgt:e(h).hgt};f.push(o),s(n,e(n)+1)}else if(e(g)){let o=e(n)%m.length;f[e(n)-m.length].visibility=!1;let y={...m[o],x:e(h).x,y:e(h).y,wdt:e(h).wdt,hgt:e(h).hgt};f.push(y),s(n,e(n)+1)}s(v,{x:0,y:0},!0),s(_,{x:0,y:0},!0),s(g,!1)}}var Me=N('<p style="display: none" class="svelte-rw0o9z"></p>'),We=N('<h3 class="svelte-rw0o9z">GO TO</h3> <p class="svelte-rw0o9z"><button class="disabled-btn svelte-rw0o9z">Selected projects<br class="svelte-rw0o9z"><span class="svelte-rw0o9z">(coming soon)</span></button></p>',1),je=N('<div id="background"></div> <div id="foreground" role="button" tabindex="0" class="svelte-rw0o9z"><!> <!></div> <!>',1);function Ae(c,l){ne(l,!0);const{STARTING_RECTOS:p}=l.data,g=Be("options",i);let n=w(!1),m=w(0),h=w(0),f=w(!1),v=w(C({x:0,y:0})),_=w(C({x:0,y:0})),o=w(C({x:0,y:0,wdt:0,hgt:0})),y=w(!1),G=w(0),a=w(C({id:9999,x:-100,y:-100,wdt:0,hgt:0,visibility:!0})),k=C([]);function P(t){s(f,!0);const{x:u,y:b}=se(t);s(v,{x:u,y:b},!0),s(o,re(e(v).x,e(v).y,e(v).x,e(v).y,i.snapToGrid),!0),s(a,{...e(a),x:e(o).x,y:e(o).y},!0)}function z(t){if(e(f)){const{x:u,y:b}=se(t);s(_,{x:u,y:b},!0),s(o,re(e(v).x,e(v).y,e(_).x,e(_).y,i.snapToGrid),!0),s(y,e(o).wdt>=oe&&e(o).hgt>=oe*2,!0),s(a,{...e(a),x:e(o).x,y:e(o).y,wdt:e(o).wdt,hgt:e(o).hgt},!0)}}setTimeout(()=>{for(let t=0;t<4;t++)setTimeout(()=>{k.push(p[e(G)]),s(G,e(G)+1)},100*t)},500);function he(t){for(const[u,b]of Object.entries(t))document.documentElement.style.setProperty(`--${u}`,String(b))}xe(()=>{{const t=localStorage.getItem("options");if(t){const u=JSON.parse(t);i.colorScheme=u.colorScheme,i.showBorder=u.showBorder,i.showGrid=u.showGrid,i.snapToGrid=u.showGrid}s(n,!0)}}),ee(()=>he(i.colorScheme)),ee(()=>g.set(i));var V=U(),ve=M(V);{var ue=t=>{var u=je(),b=M(u),B=$(b,2);B.__pointerdown=P,B.__pointermove=z,B.__pointerup=[Le,f,a,y,G,p,o,k,v,_];var R=O(B);const pe=F(()=>e(y)?"live":"invalid");q(R,{get id(){return`r-${e(a).id??""}`},get type(){return e(pe)},get x(){return e(a).x},get y(){return e(a).y},get wdt(){return e(a).wdt},get hgt(){return e(a).hgt},children:(W,d)=>{var T=Me();x(W,T)},$$slots:{default:!0}});var ge=$(R,2);de(ge,17,()=>k,ce,(W,d)=>{var T=U(),fe=M(T);{var _e=D=>{const j=F(()=>i.showBorder?"perma":"transparent");q(D,{get id(){return`r-${e(d).id??""}`},get type(){return e(j)},get x(){return e(d).x},get y(){return e(d).y},get wdt(){return e(d).wdt},get hgt(){return e(d).hgt},children:(E,L)=>{var J=We();H(2),x(E,J)},$$slots:{default:!0}})},we=(D,j)=>{{var E=L=>{const J=F(()=>i.showBorder?"perma":"transparent");q(L,{get id(){return`r-${e(d).id??""}`},get type(){return e(J)},get x(){return e(d).x},get y(){return e(d).y},get wdt(){return e(d).wdt},get hgt(){return e(d).hgt},children:(ye,Ee)=>{var I=U(),be=M(I);De(be,()=>e(d).content),x(ye,I)},$$slots:{default:!0}})};K(D,L=>{e(d).visibility&&L(E)},j)}};K(fe,D=>{e(d).content==="BUTTON"&&e(d).visibility?D(_e):D(we,!1)})}x(W,T)}),S(B);var me=$(B,2);Te(me,{}),Y(()=>Z(b,1,A(i.showGrid&&i.colorScheme.isDark?"bgrid-dark":i.showGrid&&!i.colorScheme.isDark?"bgrid-light":""),"svelte-rw0o9z")),x(t,u)};K(ve,t=>{e(n)&&t(ue)})}te("innerWidth",t=>s(m,t,!0)),te("innerHeight",t=>s(h,t,!0)),x(c,V),ie()}le(["pointerdown","pointermove","pointerup"]);export{Ae as component};
